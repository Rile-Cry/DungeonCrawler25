[gd_resource type="BehaviorTree" load_steps=50 format=3 uid="uid://c00xr2o8jwmcn"]

[ext_resource type="Script" uid="uid://dflkrw6mr2t5u" path="res://ai/tasks/path_scan.gd" id="1_jikak"]
[ext_resource type="Script" path="res://ai/tasks/drop_in.gd" id="1_otxdf"]
[ext_resource type="Script" path="res://ai/tasks/target_player.gd" id="1_wjqib"]
[ext_resource type="Script" path="res://ai/tasks/turn.gd" id="2_xd8ps"]
[ext_resource type="Script" path="res://ai/tasks/advance.gd" id="4_wjqib"]

[sub_resource type="BlackboardPlan" id="BlackboardPlan_vb233"]
var/forward_path_check/name = &"forward_path_check"
var/forward_path_check/type = 1
var/forward_path_check/value = false
var/forward_path_check/hint = 0
var/forward_path_check/hint_string = "true"
var/target/name = &"target"
var/target/type = 24
var/target/hint = 0
var/target/hint_string = "Player Node"
var/in_combat/name = &"in_combat"
var/in_combat/type = 1
var/in_combat/value = false
var/in_combat/hint = 0
var/in_combat/hint_string = "false"
var/spawned/name = &"spawned"
var/spawned/type = 1
var/spawned/value = false
var/spawned/hint = 0
var/spawned/hint_string = "false"

[sub_resource type="BBVariant" id="BBVariant_otxdf"]
type = 1
saved_value = true
resource_name = "true"

[sub_resource type="BTCheckVar" id="BTCheckVar_g4wun"]
variable = &"spawned"
check_type = 5
value = SubResource("BBVariant_otxdf")

[sub_resource type="BTRunLimit" id="BTRunLimit_otxdf"]
children = [SubResource("BTCheckVar_g4wun")]

[sub_resource type="BBNode" id="BBNode_xf7sy"]
saved_value = NodePath("WalkerBot/AnimationPlayer")
resource_name = "WalkerBot/AnimationPlayer"

[sub_resource type="BTPlayAnimation" id="BTPlayAnimation_s4l1l"]
await_completion = 2.7
animation_player = SubResource("BBNode_xf7sy")
animation_name = &"walkerboosting"

[sub_resource type="BTAction" id="BTAction_g4wun"]
script = ExtResource("1_otxdf")

[sub_resource type="BBNode" id="BBNode_otxdf"]
saved_value = NodePath("WalkerBot/AnimationPlayer")
resource_name = "WalkerBot/AnimationPlayer"

[sub_resource type="BTPlayAnimation" id="BTPlayAnimation_g4wun"]
await_completion = 0.3
animation_player = SubResource("BBNode_otxdf")
animation_name = &"walkerboostend"
blend = 0.1

[sub_resource type="BTSequence" id="BTSequence_s4l1l"]
custom_name = "DROP RUNNER"
children = [SubResource("BTPlayAnimation_s4l1l"), SubResource("BTAction_g4wun"), SubResource("BTPlayAnimation_g4wun")]

[sub_resource type="BTSequence" id="BTSequence_vk81o"]
custom_name = "HellDiver"
children = [SubResource("BTRunLimit_otxdf"), SubResource("BTSequence_s4l1l")]

[sub_resource type="BTAction" id="BTAction_jikak"]
script = ExtResource("1_wjqib")
group = &"player"
output_var = &"target"

[sub_resource type="BTRunLimit" id="BTRunLimit_wjqib"]
children = [SubResource("BTAction_jikak")]

[sub_resource type="BTCondition" id="BTCondition_wjqib"]
script = ExtResource("4_wjqib")

[sub_resource type="BTCooldown" id="BTCooldown_otxdf"]
duration = 8.0
children = [SubResource("BTCondition_wjqib")]

[sub_resource type="BTSequence" id="BTSequence_xf7sy"]
children = [SubResource("BTCooldown_otxdf")]

[sub_resource type="BBVariant" id="BBVariant_s4l1l"]
type = 1
saved_value = false
resource_name = "false"

[sub_resource type="BTCheckVar" id="BTCheckVar_vk81o"]
variable = &"in_combat"
value = SubResource("BBVariant_s4l1l")

[sub_resource type="BBNode" id="BBNode_g4wun"]
saved_value = NodePath("WalkerBot/AnimationPlayer")
resource_name = "WalkerBot/AnimationPlayer"

[sub_resource type="BTAwaitAnimation" id="BTAwaitAnimation_xf7sy"]
animation_player = SubResource("BBNode_g4wun")
animation_name = &"walkerboostend"
max_time = 2.0

[sub_resource type="BBNode" id="BBNode_xd8ps"]
saved_value = NodePath("WalkerBot/AnimationPlayer")
resource_name = "WalkerBot/AnimationPlayer"

[sub_resource type="BTPlayAnimation" id="BTPlayAnimation_jikak"]
animation_player = SubResource("BBNode_xd8ps")
animation_name = &"walkeridle"
blend = 0.1
speed = 2.0

[sub_resource type="BTRandomWait" id="BTRandomWait_wjqib"]

[sub_resource type="BTSequence" id="BTSequence_otxdf"]
custom_name = "IdleRUNNER"
children = [SubResource("BTAwaitAnimation_xf7sy"), SubResource("BTPlayAnimation_jikak"), SubResource("BTRandomWait_wjqib")]

[sub_resource type="BTCooldown" id="BTCooldown_g4wun"]
duration = 5.0
children = [SubResource("BTSequence_otxdf")]

[sub_resource type="BTAction" id="BTAction_xd8ps"]
script = ExtResource("1_jikak")
open_paths = &"open_paths"
forward_path_check = &"forward_path"

[sub_resource type="BTComment" id="BTComment_xd8ps"]
custom_name = "If forward path fails, scan animation, else, succeed out."

[sub_resource type="BBVariant" id="BBVariant_xd8ps"]
type = 1
saved_value = true
resource_name = "true"

[sub_resource type="BTCheckVar" id="BTCheckVar_jikak"]
variable = &"forward_path_check"
check_type = 5
value = SubResource("BBVariant_xd8ps")

[sub_resource type="BBNode" id="BBNode_jikak"]
saved_value = NodePath("WalkerBot/AnimationPlayer")
resource_name = "WalkerBot/AnimationPlayer"

[sub_resource type="BTPlayAnimation" id="BTPlayAnimation_wjqib"]
animation_player = SubResource("BBNode_jikak")
animation_name = &"walkeridle"
speed = 2.0

[sub_resource type="BTWait" id="BTWait_jikak"]
duration = 2.0

[sub_resource type="BTSequence" id="BTSequence_g4wun"]
custom_name = "SCAN RUNNER"
children = [SubResource("BTPlayAnimation_wjqib"), SubResource("BTWait_jikak")]

[sub_resource type="BTSelector" id="BTSelector_xd8ps"]
custom_name = "Run Scan Animation?"
children = [SubResource("BTComment_xd8ps"), SubResource("BTCheckVar_jikak"), SubResource("BTSequence_g4wun")]

[sub_resource type="BTSelector" id="BTSelector_jikak"]
custom_name = "SCAN LOGIC"
children = [SubResource("BTAction_xd8ps"), SubResource("BTSelector_xd8ps")]

[sub_resource type="BBNode" id="BBNode_k2a0k"]
saved_value = NodePath("WalkerBot/AnimationPlayer")
resource_name = "WalkerBot/AnimationPlayer"

[sub_resource type="BTPlayAnimation" id="BTPlayAnimation_4fx76"]
animation_player = SubResource("BBNode_k2a0k")
animation_name = &"walkingwalker"

[sub_resource type="BTAction" id="BTAction_otxdf"]
script = ExtResource("2_xd8ps")
open_paths = &"open_paths"

[sub_resource type="BTWait" id="BTWait_xd8ps"]
duration = 1.5

[sub_resource type="BTSequence" id="BTSequence_xd8ps"]
custom_name = "MoveRunner"
children = [SubResource("BTPlayAnimation_4fx76"), SubResource("BTAction_otxdf"), SubResource("BTWait_xd8ps")]

[sub_resource type="BTSequence" id="BTSequence_wjqib"]
custom_name = "MoveLogic"
children = [SubResource("BTSelector_jikak"), SubResource("BTSequence_xd8ps")]

[sub_resource type="BTSelector" id="BTSelector_wjqib"]
custom_name = "PatrolMovement"
children = [SubResource("BTCooldown_g4wun"), SubResource("BTSequence_wjqib")]

[sub_resource type="BTParallel" id="BTParallel_kfcax"]
num_successes_required = 2
custom_name = "Out of Combat"
children = [SubResource("BTCheckVar_vk81o"), SubResource("BTSelector_wjqib")]

[sub_resource type="BTSelector" id="BTSelector_otxdf"]
children = [SubResource("BTSequence_vk81o"), SubResource("BTRunLimit_wjqib"), SubResource("BTSequence_xf7sy"), SubResource("BTParallel_kfcax")]

[resource]
blackboard_plan = SubResource("BlackboardPlan_vb233")
root_task = SubResource("BTSelector_otxdf")
